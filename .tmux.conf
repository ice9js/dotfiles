# Set Zsh as the default shell
set-option -g default-shell /bin/zsh

# Start a 'Default' session if no sessions exist
new-session -s Default

# Set prefix to Ctrl-k
unbind C-b
set -g prefix C-k
bind C-k send-prefix

# Reload tmux config
bind r source-file ~/.tmux.conf

# Split view
bind | split-window -h
bind _ split-window -v

# Allow to toggle mouse on and off
bind m set -g mouse on
bind M set -g mouse off

# Turn on colors
set -g default-terminal "screen-256color"

# Set status bar color to magenta
set -g status-bg magenta
set -g status-fg black

# Set command bar (prefix+:) color
set -g message-style bg=green,fg=black

# Set highlight color
set -g mode-style fg=black,bg=magenta

# Set pane divider color (active = magenta, inactive = colour238)
set -g pane-border-style fg=colour238
set -g pane-active-border-style bg=default,fg=magenta

# Set status bar information in the following format
# Session > User > [ Git Branch > ] Current Directory > Command | Host
set -g status-left-length 32
set -g status-left "#[fg=colour231,bg=colour236]#[fg=colour236,bg=colour231,bold] ❐ #S #[fg=colour250,bg=colour231,nobold]#[fg=black,bg=colour250,bold] #(whoami) #[fg=colour250,bg=black]"
set -g window-status-format ""
set -g window-status-current-format "#[fg=colour231,bg=black]#(~/.scripts/tmux-git.sh '#{pane_current_path}')#[fg=magenta,bg=black]#[fg=black,bg=magenta,noreverse,bold] #{pane_current_path} > #W"
set -g status-right "#[fg=white,bg=magenta]#[fg=green,bg=white]#[fg=black,bg=green,bold] #T #[fg=green,bg=black,nobold]#[default]"

# Turn on sessions auto restore
set -g @continuum-restore "on"

# TPM configuration
set-environment -g TMUX_PLUGIN_MANAGER_PATH  '~/.tmux/plugins'

# Install plugins
set -g @tpm_plugins '          \
  tmux-plugins/tpm             \
  tmux-plugins/tmux-sensible   \
  tmux-plugins/tmux-resurrect  \
  tmux-plugins/tmux-continuum  \
'

# Initialize TMUX plugin manager - don't add anything below that line
run '~/.tmux/plugins/tpm/tpm'

